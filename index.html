<!doctype html>
<html>
  <head>
    <title>Gmail API demo</title>
    <meta charset="UTF-8">

    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
    <style>
      iframe {
        width: 100%;
        border: 0;
        min-height: 80%;
        height: 600px;
        display: flex;
      }
      .nowrap {
        white-space: nowrap;
      }
    </style>
  </head>
  <body>

    <div class="container">
      <h1>Gmail API demo</h1>

      <button id="authorize-button" class="btn btn-primary hidden">Authorize</button>

      <form id="filters" name="filters" method="get" class="form-inline hidden">

          <div class="form-group">
            <label class="control-label" for="label">Label</label>
            <select class="form-control" id="label" name="label">
              <option value="">â€“</option>
            </select>
          </div>

          <div class="form-group">
            <label class="control-label" for="q">Match</label>
            <input class="form-control" type="text" name="q" id="q" placeholder="filter match" value="" />
          </div>

          <div class="form-group">
            <label class="control-label" for="maxResults">Limit</label>
            <input class="form-control" type="number" name="maxResults" id="maxResults" placeholder="filter limit" value="1" min="1" />
          </div>

          <button type="submit" class="btn btn-success">Filter</button>

      </form>

      <p class="clearfix js_ui-message"></p>

      <table class="table table-hover table-inbox hidden">
        <thead>
          <tr>
            <th>From</th>
            <th>Subject</th>
            <th>Date/Time</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <div class="modal fade" id="message-modal" tabindex="-1" role="dialog" aria-labelledby="myModalTitle">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
            <h4 class="modal-title" id="myModalTitle"></h4>
          </div>
          <div class="modal-body">
            <iframe id="message-iframe" srcdoc="<p>Loading...</p>">
            </iframe>
          </div>
        </div>
      </div>
    </div>

    <script id="option-template" type="x-tmpl-mustache">
      <option value="{{messageLabelId}}" {{messageLabelSelected}}>{{messageLabelName}}</option>
    </script>

    <script id="row-template" type="x-tmpl-mustache">
      <tr>
        <td>{{from}}</td>
        <td>
          <a href="#" class="message-link" data-toggle="modal" id="message-link-{{messageId}}">
            {{subject}}
          </a>
        </td>
        <td class="nowrap">{{date}}</td>
      </tr>
    </script>

    <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment.min.js"></script>
    <!-- 
      // I don't know the reason why mustache is not loading via cdnjs,
      // so no choice but to load it locally
      <script scr="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/2.1.3/mustache.min.js" type="text/javascript"></script>
    -->
    <script src="bower_components/mustache/mustache.min.js"></script>
    <script src="main.js"></script>
    <script src="config.js"></script>
    <script src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script>
  </body>
</html>
